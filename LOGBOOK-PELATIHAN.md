# Logbook Pengembangan Sistem Pelatihan

## Entry 1: Sistem Lowongan

| Aspek | Detail |
|-------|--------|
| **Tanggal & Waktu** | 17/11/2025 15:45 |
| **AI yang Digunakan** | Claude Haiku 4.5 |
| **Prompt / Pertanyaan** | "Buat sistem backend untuk form admin yang menyimpan lowongan ke database dan menampilkannya di halaman lowongan sesuai kategori. Khusus link pendaftaran dan kontak dilink ke tombol melamar dan pesan" |
| **Task yang Dilakukan** | 1. Membaca struktur project<br>2. Membuat schema Lowongan<br>3. Membuat API routes (POST, GET, PUT, DELETE)<br>4. Membuat halaman lowongan.html<br>5. Membuat JavaScript untuk load & render<br>6. Update index.js dengan routes |
| **Respon AI (Ringkasan Code)** | **Schema Lowongan:**<br>```javascript`<br>const lowonganSchema = new mongoose.Schema({`<br>  `nama, deskripsi, penyelenggara,`<br>  `lokasi, tanggalExpired, kategori,`<br>  `hadiah, persyaratan,`<br>  `linkKontak, linkPendaftaran`<br>`})`<br>```<br><br>**POST Endpoint:**<br>```javascript`<br>route.post("/lowongan", async (req, res) => {`<br>  `const lowongan = new Lowongan({...})`<br>  `await lowongan.save()`<br>`})`<br>``` |
| **Error yang Dihadapi** | ✅ Tidak ada error mayor |
| **Implementasi** | ✅ Sistem berhasil di-setup<br>✅ Semua file terstruktur baik<br>✅ API routes berfungsi |
| **Refleksi Tim** | Setup berjalan smooth karena structure project sudah ada. Tidak ada blocker di tahap ini. |

---

## Entry 2: Implementasi Admin Panel untuk Lowongan

| Aspek | Detail |
|-------|--------|
| **Tanggal & Waktu** | 17/11/2025 16:30 |
| **AI yang Digunakan** | Claude Haiku 4.5 |
| **Prompt / Pertanyaan** | "Tambahkan admin panel untuk manajemen lowongan dengan fitur tambah, edit, hapus lowongan. Form di modal, data dari database, tampil dalam grid card" |
| **Task yang Dilakukan** | 1. Update AdminHTML.html dengan modal form<br>2. Membuat `public/programlomba.js` - admin manager<br>3. Membuat CSS styling untuk admin panel<br>4. Integrasi dengan API /api/lowongan<br>5. Implementasi edit & delete functionality<br>6. Validasi form input<br>7. Status badge (AKTIF/EXPIRED) |
| **Respon AI (Ringkasan Code)** | **Load Data:**<br>```javascript`<br>async function loadLombaDariDatabase() {`<br>  `const response = await fetch('/api/lowongan');`<br>  `const result = await response.json();`<br>  `if (result.success) {`<br>    `lombaData = result.lowongan;`<br>    `renderLomba();`<br>  `}`<br>`}`<br>```<br><br>**Edit Functionality:**<br>```javascript`<br>function editLomba(id) {`<br>  `const lomba = lombaData.find(l => l._id === id);`<br>  `editingId = id;`<br>  `openModal();`<br>`}`<br>``` |
| **Error yang Dihadapi** | ⚠️ **Error 1:** API Route Conflict pada `/api/lowongan/:id`<br>- Masalah: Express tidak bisa membedakan antara GET /:id dengan DELETE /:id<br>- Gejala: Delete request di-handle sebagai GET, data tidak terhapus<br>- Root cause: Fetch method tidak di-specify dengan benar<br>- Fix: Pastikan method DELETE di-include dalam fetch options<br><br>⚠️ **Error 2:** Modal Form Not Clearing<br>- Masalah: Form masih menampilkan data lama saat buka modal baru<br>- Gejala: Edit satu lowongan, terus tambah baru, field masih terisi<br>- Root cause: Form tidak di-reset setelah submit<br>- Fix: Panggil `form.reset()` di openModal() |
| **Implementasi** | ✅ Admin panel berhasil dibuat<br>✅ CRUD operations berfungsi semua<br>✅ Modal form responsive<br>✅ Status badge otomatis (AKTIF/EXPIRED)<br>✅ Edit & Delete dengan confirmation<br>✅ Real-time data refresh setelah action<br>✅ Validasi input form |
| **Refleksi Tim** | Admin panel critical untuk manajemen data. Error 1 adalah common mistake saat bekerja dengan REST API. Error 2 adalah UX issue yang sering overlooked tapi sangat penting. Perlu testing lebih teliti untuk user flow seperti edit → tambah → edit. |

---

## Entry 3: Sistem Pertemanan (Friend System)

| Aspek | Detail |
|-------|--------|
| **Tanggal & Waktu** | 17/11/2025 14:00 - 17:00 |
| **AI yang Digunakan** | Claude Haiku 4.5 (GitHub Copilot) |
| **Prompt / Pertanyaan** | **1. Inisial Request:**<br>"Coba buat sistem pertemanan bisa temukan teman melalui nama dan pastinya tersimpan di data base mengenai data akun mempunyai teman siapa aja. Lalu ada juga sistem meminta pertemanan lalu menerima permintaan pertemanan."<br><br>**2. Fix Request #1:**<br>"Token tidak valid ketika input nama/nisn teman. dan bedakan juga bahwa ketika permintaan pertemanan masih kosong bukan berati terjadi kesalahan saat memuat permintaan"<br><br>**3. Fix Request #2:**<br>"Masih belum bisa hapus teman" |
| **Respon AI (Ringkasan Code)** | **Database Schema (MongoDB):**<br>```javascript`<br>const friendshipSchema = mongoose.Schema({`<br>  `requester: { type: ObjectId, ref: 'User' },`<br>  `recipient: { type: ObjectId, ref: 'User' },`<br>  `status: { enum: ['pending','accepted'], default: 'pending' },`<br>  `timestamps: true`<br>`});`<br>```<br><br>**API Endpoints (8 Total):**<br>- GET `/search?query=` - Search friends by name/NISN<br>- POST `/request` - Send friend request<br>- GET `/requests/incoming` - View incoming requests<br>- GET `/requests/outgoing` - View outgoing requests<br>- PUT `/requests/:id/accept` - Accept request<br>- PUT `/requests/:id/reject` - Reject request<br>- GET `/list` - Get friends list<br>- DELETE `/user/:userId` - Delete friend<br><br>**Frontend Search:**<br>```javascript`<br>async function searchFriends() {`<br>  `const token = getToken();`<br>  `const response = await fetch('/api/friendship/search?query=' + query, {`<br>    `headers: { 'Authorization': 'Bearer ' + token }`<br>  `});`<br>  `const data = await response.json();`<br>  `displaySearchResults(data.users);`<br>`}`<br>```<br><br>**Toast Notification:**<br>```javascript`<br>function showAlert(message, type) {`<br>  `const toast = document.createElement('div');`<br>  `toast.className = 'toast toast-' + type;`<br>  `document.body.appendChild(toast);`<br>  `setTimeout(() => toast.classList.add('show'), 10);`<br>  `setTimeout(() => toast.remove(), 3300);`<br>`}`<br>``` |
| **Implementasi dan Refleksi Tim** | **Status: ✅ COMPLETE & FULLY FUNCTIONAL**<br><br>**Features Implemented:**<br>✅ Search teman by nama/NISN dengan status indicator<br>✅ Send/Accept/Reject friend requests dengan confirmation<br>✅ View incoming & outgoing requests dengan timestamps<br>✅ View friends list dengan delete option<br>✅ Real-time status updates & refresh<br>✅ Toast notifications (non-blocking UX)<br>✅ Session management & auto-logout on 401<br>✅ 3-Tab UI: Permintaan, Temukan, Daftar Teman<br><br>**Bugs Found & Fixed:**<br><br>**Bug #1: Token Invalid (401 Unauthorized) - Phase 2**<br>- Penyebab: Inconsistent token localStorage key<br>  - `protected-page.js` simpan `authToken`<br>  - `pertemanan.js` cari `jwtToken` ❌<br>- Impact: Semua API calls return 401<br>- Solusi: Standardize semua ke `authToken`<br>- Lesson: Centralize token handling di satu utility<br><br>**Bug #2: Empty State Shown as Error - Phase 2**<br>- Penyebab: `loadIncomingRequests()` throw error saat data kosong<br>- Impact: User kira ada server error padahal data kosong<br>- Solusi: Bedakan error handling di code<br>  - Empty data → show UI empty state<br>  - Error response → show error toast<br>- Lesson: UX matters - empty ≠ error<br><br>**Bug #3: Delete Friend Not Working - Phase 3**<br>- Penyebab: Frontend parameter tidak dikirim correct<br>  - API expect `friendshipId` tapi display tidak ada data itu<br>  - Button `onclick` tidak pass parameter<br>- Impact: Delete button tidak responsif sama sekali<br>- Solusi: 2 langkah<br>  - Update API endpoint: `/friendship/:id` → `/friendship/user/:userId`<br>  - Include `friendshipId` di response `/api/friendship/list`<br>  - Update button onclick dengan proper parameters<br>- Lesson: Frontend & Backend koordinasi - API response harus lengkap<br><br>**Key Learnings & Best Practices:**<br><br>1. **Token Management Architecture:**<br>   - ❌ Simpan di banyak file → inconsistency<br>   - ✅ Satu utility function global → consistent access<br>   - ✅ Use `getToken()` everywhere, jangan hardcode key<br><br>2. **UX Design - Error vs Empty State:**<br>   - ❌ `showAlert('Gagal load')` untuk data kosong<br>   - ✅ Show UI-based empty state dengan friendly message<br>   - ✅ Error toast hanya untuk actual errors (500, network, etc)<br><br>3. **API Endpoint Design:**<br>   - ❌ DELETE `/friendship/:friendshipId` (hard to find ID)<br>   - ✅ DELETE `/user/:userId` (user context clear)<br>   - ✅ Resources named from user perspective<br><br>4. **Frontend-Backend Data Sync:**<br>   - ❌ Frontend harus query tambahan untuk missing data<br>   - ✅ API response include all needed fields upfront<br>   - ✅ Response adalah source of truth<br><br>5. **Testing Strategy untuk Multi-Phase Development:**<br>   - Initial: Unit test individual endpoints<br>   - Phase 2: Integration test token flow<br>   - Phase 3: E2E test complete user journeys<br>   - All: Test error cases (401, 404, network)<br><br>**Architecture Strengths:**<br>- Clean separation of concerns (routes/schema/UI)<br>- Proper JWT validation middleware<br>- Bidirectional friendship relationship handling<br>- Optimistic UI updates with confirmations<br>- Comprehensive error boundaries<br><br>**Future Enhancement Roadmap:**<br>- [ ] Real-time notifications (WebSocket)<br>- [ ] Friend suggestions (mutual friends algorithm)<br>- [ ] Block/unblock users<br>- [ ] Friend activity feed<br>- [ ] Advanced search filters<br>- [ ] Relationship timeline |
